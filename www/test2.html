<!DOCTYPEhtml>
<html>
<head>
<title>單一Marker</title>
<metacharset="utf-8">
<style>
html,body,#map-canvas {
height: 100%;
margin: 0px;
padding: 0px
      }
</style>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&language=en"></script>


<!-- 上述的url參數,v=3.exp，表示為api版本代號;language=zh_TW,表示設定語系為zh_TW，如要簡體就設定
zh_CN -->
<script>
function initialize() {

	
	var mapOptions = {
		panControl: true, //要不要出現可以上下左右移動的面板，如圖1
		zoomControl: true, //要不要出現可以放大縮小的面板，如圖3
		mapTypeControl: false, //切換地圖檢視類型的面板，如圖4
		scaleControl: true, //比例尺資訊，如圖5
		streetViewControl: false,  //顯示街景服務的面板，如圖2
		overviewMapControl: false, //總覽圖的面板，在右下力有個開合的圖示，如圖6
		center: new google.maps.LatLng(25.048215, 121.517123), //台北車站的經度,緯度
		zoom: 18 //縮放的大小，0-18，0最小，18最大
	};

	function success(pos) {
alert("hk: " + pos);			
				mapOptions.center = new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude) ;
				var map = new google.maps.Map(document.getElementById('map-canvas'),mapOptions);
				
				var marker1 = new google.maps.Marker({  
					map: map,
					position : mapOptions.center,
					title : "mark 1" 
				}) ;
				
				var marker2 = new google.maps.Marker({  
					map: map,
					position : new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude + 0.001) , 
					title : "mark 2"
				}) ;
				var infowindow = new google.maps.InfoWindow();
					infowindow.setContent('<b>This is marker</b><br>printer 1');
					google.maps.event.addListener(marker1, 'click', function() {
						infowindow.open(map, marker1);
					});
		
	}
	
	function error(err) {
		console.warn(`ERROR(${err.code}): ${err.message}`);
	};
	
	if (navigator.geolocation) {
alert("pos");	
        navigator.geolocation.getCurrentPosition( success, error, {maximumAge: 500000, enableHighAccuracy:true, timeout: 6000} );
		
	}
	
alert ( "map" + mapOptions.center) ;
	var map = new google.maps.Map(document.getElementById('map-canvas'),mapOptions);
//產生marker，如圖7
	var marker = new google.maps.Marker({
		map: map,
		position: map.getCenter()
	});
  
	var infowindow = new google.maps.InfoWindow();
		infowindow.setContent('<b>台北車站<b>');
		google.maps.event.addListener(marker, 'click', function() {
			infowindow.open(map, marker);
		});
}

google.maps.event.addDomListener(window, 'load', initialize);

</script>
</head>
<body>
hello
<div id="map-canvas"style="width:90%; height:90%; border-style:solid;border-width:3px;">
 </div>
</body>
</html>

